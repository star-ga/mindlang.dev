1:"$Sreact.fragment"
2:I[64798,["/_next/static/chunks/39f15fa21a0a836e.js","/_next/static/chunks/27be2e6eef9e968f.js"],"DocsSidebar"]
3:I[41146,["/_next/static/chunks/39f15fa21a0a836e.js","/_next/static/chunks/27be2e6eef9e968f.js"],"DocsHeader"]
4:I[61939,["/_next/static/chunks/39f15fa21a0a836e.js","/_next/static/chunks/27be2e6eef9e968f.js"],"CodeBlock"]
2a:I[22016,["/_next/static/chunks/39f15fa21a0a836e.js","/_next/static/chunks/27be2e6eef9e968f.js"],""]
2b:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
2c:"$Sreact.suspense"
0:{"buildId":"PYBLZUVKaXGsHbE8vAhZb","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container !pt-12 !pb-16","children":["$","div",null,{"className":"flex gap-12","children":[["$","$L2",null,{"currentPath":"/docs/mic/binary"}],["$","main",null,{"className":"flex-1 min-w-0","children":[["$","$L3",null,{"currentPath":"/docs/mic/binary"}],["$","h1",null,{"className":"page-title mt-4","children":"MIC-B v2 Binary Format"}],["$","div",null,{"className":"prose prose-slate max-w-none","children":[["$","p",null,{"className":"text-lg text-muted mb-8","children":"MIC-B v2 is a compact binary format for Mind IR graphs, designed for efficient storage and fast parsing with direct memory mapping."}],["$","div",null,{"className":"bg-primary/5 border border-primary/20 rounded-lg p-4 mb-8","children":[["$","h4",null,{"className":"font-bold mb-2","children":"Key Features"}],["$","ul",null,{"className":"text-sm text-muted space-y-1 mb-0","children":[["$","li",null,{"children":[["$","strong",null,{"children":"~1.4-3x smaller"}]," than mic@2 text format (55 vs 78 bytes for residual block)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"ULEB128 varints"}]," for space-efficient integers"]}],["$","li",null,{"children":[["$","strong",null,{"children":"String table deduplication"}]," for repeated identifiers"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Deterministic"}]," — same graph produces identical bytes"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Lossless roundtrip"}]," with mic@2"]}]]}]]}],["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Wire Format Layout"}],["$","$L4",null,{"className":"mb-4","children":"┌─────────────────┬──────────────────────────────────┐\n│ Offset          │ Content                          │\n├─────────────────┼──────────────────────────────────┤\n│ 0-3             │ Magic: \"MICB\" (4 bytes ASCII)    │\n│ 4               │ Version: 0x02                    │\n│ 5+              │ String Table                     │\n│ ...             │ Symbol Table                     │\n│ ...             │ Type Table                       │\n│ ...             │ Value Table                      │\n│ ...             │ Output (1 uleb128)               │\n└─────────────────┴──────────────────────────────────┘"}],["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"ULEB128 Encoding"}],["$","p",null,{"className":"text-muted mb-4","children":"Unsigned Little-Endian Base-128 encoding uses 7 bits per byte for data, with the MSB as a continuation flag:"}],["$","div",null,{"className":"overflow-x-auto mb-8","children":["$","table",null,{"className":"min-w-full text-sm","children":[["$","thead",null,{"children":["$","tr",null,{"className":"border-b","children":[["$","th",null,{"className":"text-left py-2 pr-4 font-bold","children":"Value"}],["$","th",null,{"className":"text-left py-2 font-bold","children":"Encoded Bytes"}]]}]}],["$","tbody",null,{"className":"text-muted font-mono","children":[["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4","children":"0"}],["$","td",null,{"className":"py-2","children":"[0x00]"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4","children":"127"}],["$","td",null,{"className":"py-2","children":"[0x7F]"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4","children":"128"}],["$","td",null,{"className":"py-2","children":"[0x80, 0x01]"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4","children":"16383"}],["$","td",null,{"className":"py-2","children":"[0xFF, 0x7F]"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4","children":"16384"}],["$","td",null,{"className":"py-2","children":"[0x80, 0x80, 0x01]"}]]}]]}]]}]}],["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Zigzag Encoding"}],["$","p",null,{"className":"text-muted mb-4","children":"Signed integers use zigzag encoding before ULEB128 for efficient representation of small negative values:"}],["$","$L4",null,{"className":"mb-4","children":"// Zigzag mapping\n0  →  0\n-1 →  1\n1  →  2\n-2 →  3\n2  →  4\n...\n\n// Formula\nencode(n) = (n << 1) ^ (n >> 63)\ndecode(z) = (z >> 1) ^ -(z & 1)"}],"$L5","$L6","$L7","$L8","$L9","$La","$Lb","$Lc","$Ld","$Le","$Lf","$L10","$L11","$L12","$L13","$L14","$L15","$L16","$L17","$L18","$L19","$L1a","$L1b","$L1c","$L1d","$L1e","$L1f","$L20","$L21","$L22","$L23","$L24","$L25","$L26"]}],"$L27"]}]]}]}],["$L28"],"$L29"]}],"loading":null,"isPartial":false}
5:["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Table Structures"}]
6:["$","h3",null,{"className":"text-xl font-bold mt-8 mb-4","children":"1. String Table"}]
7:["$","p",null,{"className":"text-muted mb-4","children":"Interned strings for names and dimension tokens:"}]
8:["$","$L4",null,{"className":"mb-4","children":"uleb128     count           # number of strings\nrepeat count:\n  uleb128   byte_length     # UTF-8 byte length\n  bytes     data            # UTF-8 content (no null terminator)"}]
9:["$","h3",null,{"className":"text-xl font-bold mt-8 mb-4","children":"2. Symbol Table"}]
a:["$","p",null,{"className":"text-muted mb-4","children":"References to symbolic dimension names:"}]
b:["$","$L4",null,{"className":"mb-4","children":"uleb128     count           # number of symbols\nrepeat count:\n  uleb128   string_idx      # index into string table"}]
c:["$","h3",null,{"className":"text-xl font-bold mt-8 mb-4","children":"3. Type Table"}]
d:["$","p",null,{"className":"text-muted mb-4","children":"Tensor type definitions:"}]
e:["$","$L4",null,{"className":"mb-4","children":"uleb128     count           # number of types\nrepeat count:\n  u8        dtype           # data type (see table)\n  uleb128   rank            # number of dimensions\n  repeat rank:\n    uleb128 dim_str_idx     # index into string table"}]
f:["$","h4",null,{"className":"font-bold mt-4 mb-2","children":"Data Type Encoding"}]
10:["$","div",null,{"className":"overflow-x-auto mb-8","children":["$","table",null,{"className":"min-w-full text-sm","children":[["$","thead",null,{"children":["$","tr",null,{"className":"border-b","children":[["$","th",null,{"className":"text-left py-2 pr-4 font-bold","children":"Byte"}],["$","th",null,{"className":"text-left py-2 font-bold","children":"Type"}]]}]}],["$","tbody",null,{"className":"text-muted","children":[["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"0"}],["$","td",null,{"className":"py-2","children":"f16"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"1"}],["$","td",null,{"className":"py-2","children":"f32"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"2"}],["$","td",null,{"className":"py-2","children":"f64"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"3"}],["$","td",null,{"className":"py-2","children":"bf16"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"4-7"}],["$","td",null,{"className":"py-2","children":"i8, i16, i32, i64"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"8-11"}],["$","td",null,{"className":"py-2","children":"u8, u16, u32, u64"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"12"}],["$","td",null,{"className":"py-2","children":"bool"}]]}]]}]]}]}]
11:["$","h3",null,{"className":"text-xl font-bold mt-8 mb-4","children":"4. Value Table"}]
12:["$","p",null,{"className":"text-muted mb-4","children":"Values with implicit sequential IDs:"}]
13:["$","$L4",null,{"className":"mb-4","children":"uleb128     count           # number of values\nrepeat count:\n  u8        tag             # 0=Arg, 1=Param, 2=Node\n  ...       payload         # tag-specific data"}]
14:["$","h4",null,{"className":"font-bold mt-4 mb-2","children":"Arg/Param Payload (tag 0 or 1)"}]
15:["$","$L4",null,{"className":"mb-4","children":"uleb128     name_str_idx    # index into string table\nuleb128     type_idx        # index into type table"}]
16:["$","h4",null,{"className":"font-bold mt-4 mb-2","children":"Node Payload (tag 2)"}]
17:["$","$L4",null,{"className":"mb-4","children":"u8          opcode          # opcode byte\n...         opcode_params   # opcode-specific parameters\nuleb128     input_count     # number of inputs\nrepeat input_count:\n  uleb128   input_id        # value ID (must be < current)"}]
18:["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Opcode Encoding"}]
19:["$","div",null,{"className":"overflow-x-auto mb-8","children":["$","table",null,{"className":"min-w-full text-sm","children":[["$","thead",null,{"children":["$","tr",null,{"className":"border-b","children":[["$","th",null,{"className":"text-left py-2 pr-4 font-bold","children":"Byte"}],["$","th",null,{"className":"text-left py-2 pr-4 font-bold","children":"Opcode"}],["$","th",null,{"className":"text-left py-2 font-bold","children":"Extra Params"}]]}]}],["$","tbody",null,{"className":"text-muted","children":[["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"0"}],["$","td",null,{"className":"py-2 pr-4","children":"Matmul"}],["$","td",null,{"className":"py-2","children":"none"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"1-4"}],["$","td",null,{"className":"py-2 pr-4","children":"Add, Sub, Mul, Div"}],["$","td",null,{"className":"py-2","children":"none"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"5"}],["$","td",null,{"className":"py-2 pr-4","children":"Relu"}],["$","td",null,{"className":"py-2","children":"none"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"6"}],["$","td",null,{"className":"py-2 pr-4","children":"Softmax"}],["$","td",null,{"className":"py-2","children":"sleb128 axis"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"7-10"}],["$","td",null,{"className":"py-2 pr-4","children":"Sigmoid, Tanh, GELU, LayerNorm"}],["$","td",null,{"className":"py-2","children":"none"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"11"}],["$","td",null,{"className":"py-2 pr-4","children":"Transpose"}],["$","td",null,{"className":"py-2","children":"uleb128 n, n × sleb128"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"12"}],["$","td",null,{"className":"py-2 pr-4","children":"Reshape"}],["$","td",null,{"className":"py-2","children":"none"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"13-15"}],["$","td",null,{"className":"py-2 pr-4","children":"Sum, Mean, Max"}],["$","td",null,{"className":"py-2","children":"uleb128 n, n × sleb128 axes"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"16"}],["$","td",null,{"className":"py-2 pr-4","children":"Concat"}],["$","td",null,{"className":"py-2","children":"sleb128 axis"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"17"}],["$","td",null,{"className":"py-2 pr-4","children":"Split"}],["$","td",null,{"className":"py-2","children":"sleb128 axis, uleb128 count"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"18"}],["$","td",null,{"className":"py-2 pr-4","children":"Gather"}],["$","td",null,{"className":"py-2","children":"sleb128 axis"}]]}],["$","tr",null,{"className":"border-b","children":[["$","td",null,{"className":"py-2 pr-4 font-mono","children":"255"}],["$","td",null,{"className":"py-2 pr-4","children":"Custom"}],["$","td",null,{"className":"py-2","children":"uleb128 name_str_idx"}]]}]]}]]}]}]
1a:["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Binary Example"}]
1b:["$","p",null,{"className":"text-muted mb-4","children":["Residual block ",["$","code",null,{"children":"Y = relu(X @ W + b) + X"}]," (~55 bytes vs 78 bytes mic@2 text):"]}]
1c:["$","$L4",null,{"className":"mb-8","children":"4D 49 43 42 02              # Magic \"MICB\" + version 2\n05                          # 5 strings\n03 31 32 38                 # \"128\"\n01 58                       # \"X\"\n01 57                       # \"W\"\n01 62                       # \"b\"\n00                          # 0 symbols\n02                          # 2 types\n00 02 00 00                 # T0: f16 [128, 128]\n00 01 00                    # T1: f16 [128]\n07                          # 7 values\n00 01 00                    # Arg(\"X\", T0)\n01 02 00                    # Param(\"W\", T0)\n01 03 01                    # Param(\"b\", T1)\n02 00 02 00 01              # Node(Matmul, [0, 1])\n02 01 02 03 02              # Node(Add, [3, 2])\n02 05 01 04                 # Node(Relu, [4])\n02 01 02 05 00              # Node(Add, [5, 0])\n06                          # Output: 6"}]
1d:["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Determinism Rules"}]
1e:["$","ul",null,{"className":"list-disc pl-6 space-y-2 text-muted mb-8","children":[["$","li",null,{"children":"String table uses first-seen insertion order"}],["$","li",null,{"children":"All tables maintain graph definition order"}],["$","li",null,{"children":"Varints use minimal encoding (no zero-padding)"}],["$","li",null,{"children":"No padding bytes between sections"}]]}]
1f:["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Rust API"}]
20:["$","$L4",null,{"className":"mb-8","children":"use mind::ir::compact::v2::{parse_micb, emit_micb, Graph, MicbError};\nuse std::io::Cursor;\n\n// Parse MIC-B binary\nlet mut cursor = Cursor::new(bytes);\nlet graph = parse_micb(&mut cursor)?;\n\n// Emit Graph to MIC-B binary\nlet mut output = Vec::new();\nemit_micb(&graph, &mut output)?;\n\n// Roundtrip is deterministic\nlet mut cursor2 = Cursor::new(&output);\nassert!(graph.eq(&parse_micb(&mut cursor2)?));"}]
21:["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Validation"}]
22:["$","p",null,{"className":"text-muted mb-4","children":"Decoders MUST verify:"}]
23:["$","ul",null,{"className":"list-disc pl-6 space-y-2 text-muted mb-8","children":[["$","li",null,{"children":"Magic bytes are exactly \"MICB\""}],["$","li",null,{"children":"Version is 0x02"}],["$","li",null,{"children":"All string indices are in bounds"}],["$","li",null,{"children":"All type indices are in bounds"}],["$","li",null,{"children":"Node inputs reference earlier values only"}],["$","li",null,{"children":"Output references a valid value"}]]}]
24:["$","h2",null,{"className":"text-2xl font-bold font-heading mt-12 mb-4","children":"Error Handling"}]
25:["$","p",null,{"className":"text-muted mb-4","children":"On invalid input, decoders SHOULD:"}]
26:["$","ul",null,{"className":"list-disc pl-6 space-y-2 text-muted mb-8","children":[["$","li",null,{"children":"Return an error with byte offset"}],["$","li",null,{"children":"Not panic or crash"}],["$","li",null,{"children":"Not allocate unbounded memory"}]]}]
27:["$","nav",null,{"aria-label":"Page navigation","className":"flex items-center justify-between mt-12 pt-8 border-t border-card-border","children":[["$","$L2a",null,{"href":"/docs/mic/v2","className":"group flex items-center gap-2 text-muted hover:text-primary transition-colors","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":20,"height":20,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-left group-hover:-translate-x-1 transition-transform","aria-hidden":"true","children":[["$","path","1wnfg3",{"d":"m15 18-6-6 6-6"}],"$undefined"]}],["$","div",null,{"className":"text-left","children":[["$","span",null,{"className":"text-xs uppercase tracking-wider text-muted/60 block","children":"Previous"}],["$","span",null,{"className":"font-medium","children":"mic@2 Format"}]]}]]}],["$","$L2a",null,{"href":"/docs/map","className":"group flex items-center gap-2 text-muted hover:text-primary transition-colors text-right","children":[["$","div",null,{"children":[["$","span",null,{"className":"text-xs uppercase tracking-wider text-muted/60 block","children":"Next"}],["$","span",null,{"className":"font-medium","children":"MAP Protocol"}]]}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":20,"height":20,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right group-hover:translate-x-1 transition-transform","aria-hidden":"true","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]]}]]}]
28:["$","script","script-0",{"src":"/_next/static/chunks/27be2e6eef9e968f.js","async":true}]
29:["$","$L2b",null,{"children":["$","$2c",null,{"name":"Next.MetadataOutlet","children":"$@2d"}]}]
2d:null
