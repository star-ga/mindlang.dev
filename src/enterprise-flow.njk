---
layout: layouts/base.njk
title: Enterprise Adoption Flow
---
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@500;700&display=swap');

    .flow-header {
        background: linear-gradient(to bottom, #ffffff 0%, #fafafa 100%);
        border-bottom: 1px solid #f0f0f0;
        padding: 24px 40px;
    }

    .flow-header-top {
        display: flex;
        align-items: center;
        gap: 14px;
        margin-bottom: 6px;
    }

    .flow-logo {
        font-family: 'JetBrains Mono', monospace;
        font-size: 13px;
        font-weight: 700;
        color: #059669;
        background: rgba(5, 150, 105, 0.08);
        padding: 5px 10px;
        border-radius: 5px;
        border: 1px solid rgba(5, 150, 105, 0.15);
        letter-spacing: 0.5px;
    }

    .flow-title {
        font-size: 32px;
        font-weight: 900;
        letter-spacing: -1.2px;
        color: #1a1a1a;
        margin: 0;
    }

    .flow-subtitle {
        font-size: 13px;
        color: #7a7a7a;
        font-weight: 500;
    }

    .flow-context-note {
        font-size: 12px;
        color: #999;
        font-style: italic;
        margin-top: 8px;
        max-width: 600px;
        line-height: 1.5;
    }

    .flow-stats {
        display: flex;
        gap: 40px;
        margin-top: 18px;
    }

    .flow-stat {
        position: relative;
    }

    .flow-stat::after {
        content: '';
        position: absolute;
        right: -20px;
        top: 50%;
        transform: translateY(-50%);
        width: 1px;
        height: 28px;
        background: #e8e8e8;
    }

    .flow-stat:last-child::after {
        display: none;
    }

    .flow-stat-value {
        font-size: 26px;
        font-weight: 900;
        color: #1a1a1a;
        font-family: 'JetBrains Mono', monospace;
    }

    .flow-stat-label {
        font-size: 10px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1.1px;
        color: #aaa;
    }

    .flow-viewport {
        height: calc(100vh - 290px);
        min-height: 600px;
        cursor: grab;
        overflow: hidden;
        background: #fcfcfc;
        background-image: 
            radial-gradient(circle at 20% 30%, rgba(5, 150, 105, 0.02) 0%, transparent 50%),
            radial-gradient(circle at 80% 70%, rgba(5, 150, 105, 0.015) 0%, transparent 50%);
        position: relative;
    }

    .flow-viewport.grabbing { cursor: grabbing; }

    .flow-canvas {
        width: 2600px;
        height: 1100px;
        position: absolute;
        transform-origin: 0 0;
    }

    .flow-canvas svg {
        width: 100%;
        height: 100%;
        position: absolute;
    }

    .flow-path {
        opacity: 0.22;
        transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                    filter 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .flow-path:hover {
        opacity: 0.38;
        filter: brightness(1.1);
    }

    .flow-node {
        position: absolute;
        background: white;
        border-radius: 10px;
        padding: 18px 22px;
        box-shadow: 
            0 2px 10px rgba(0, 0, 0, 0.06),
            inset 0 0 0 1px rgba(255, 255, 255, 0.5);
        border-left: 4px solid;
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
    }

    .flow-node:hover {
        transform: translateY(-3px);
        box-shadow: 
            0 10px 28px rgba(0, 0, 0, 0.1),
            0 4px 8px rgba(0, 0, 0, 0.06);
    }

    .flow-node.primary {
        border-left-color: #059669;
    }

    .flow-node.alternative {
        border-left-color: #d97706;
    }

    .flow-node.enhanced {
        border-left-color: #7c3aed;
    }

    .flow-node.exit {
        border-left-color: #dc2626;
        background: rgba(220, 38, 38, 0.06);
        border: 1px solid rgba(220, 38, 38, 0.15);
        box-shadow: 0 2px 10px rgba(220, 38, 38, 0.08);
    }

    .flow-node.core {
        border-left-color: #059669;
        background: linear-gradient(135deg, rgba(5, 150, 105, 0.03) 0%, white 100%);
    }

    .flow-node.success {
        border-left-color: #059669;
        background: linear-gradient(135deg, rgba(5, 150, 105, 0.05) 0%, white 100%);
    }

    .flow-node-label {
        font-size: 9px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 1.3px;
        color: #b0b0b0;
        margin-bottom: 5px;
    }

    .flow-node-title {
        font-size: 16px;
        font-weight: 800;
        color: #1a1a1a;
        margin-bottom: 6px;
        letter-spacing: -0.4px;
    }

    .flow-node-desc {
        font-size: 12px;
        color: #666;
        line-height: 1.5;
        margin-bottom: 12px;
    }

    .flow-node-data {
        display: flex;
        gap: 20px;
        padding-top: 10px;
        border-top: 1px solid #f3f3f3;
        font-size: 11px;
        font-weight: 700;
        color: #555;
        font-family: 'JetBrains Mono', monospace;
    }

    .flow-node.exit .flow-node-data {
        color: #dc2626;
    }

    .flow-controls {
        position: fixed;
        bottom: 36px;
        right: 36px;
        display: flex;
        flex-direction: column;
        gap: 6px;
        z-index: 1000;
    }

    .flow-btn {
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 18px;
        color: #555;
        transition: all 0.2s;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .flow-btn:hover {
        background: #fff;
        transform: scale(1.04);
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.1);
    }

    .flow-zoom-num {
        width: 50px;
        height: 32px;
        background: rgba(255, 255, 255, 0.95);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        font-weight: 700;
        color: #666;
        font-family: 'JetBrains Mono', monospace;
    }

    .flow-legend {
        position: fixed;
        bottom: 36px;
        left: 36px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        padding: 16px 20px;
        box-shadow: 0 3px 14px rgba(0, 0, 0, 0.08);
        z-index: 1000;
        border: 1px solid rgba(0, 0, 0, 0.04);
    }

    .flow-legend-title {
        font-size: 9px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 1.2px;
        color: #bbb;
        margin-bottom: 10px;
    }

    .flow-leg-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 7px;
    }

    .flow-leg-item:last-child { margin-bottom: 0; }

    .flow-swatch {
        width: 26px;
        height: 16px;
        border-radius: 3px;
    }

    .flow-leg-name {
        flex: 1;
        font-size: 12px;
        font-weight: 600;
        color: #555;
    }

    .flow-leg-val {
        font-size: 11px;
        font-weight: 700;
        color: #999;
        font-family: 'JetBrains Mono', monospace;
    }

    .flow-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 2000;
    }

    .flow-modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
        animation: flowFadeIn 0.2s ease-out;
    }

    @keyframes flowFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .flow-modal-content {
        background: white;
        border-radius: 16px;
        padding: 40px;
        max-width: 560px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        animation: flowModalAppear 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
    }

    @keyframes flowModalAppear {
        from { opacity: 0; transform: scale(0.96); }
        to { opacity: 1; transform: scale(1); }
    }

    .flow-modal-content::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--accent-color, #059669);
        border-radius: 16px 16px 0 0;
    }

    .flow-modal-close {
        position: absolute;
        top: 16px;
        right: 16px;
        width: 36px;
        height: 36px;
        border-radius: 8px;
        background: #f5f5f5;
        border: none;
        cursor: pointer;
        font-size: 20px;
        color: #888;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
    }

    .flow-modal-close:hover {
        background: #eee;
        color: #333;
    }

    .flow-modal-label {
        font-size: 10px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 1.4px;
        color: #aaa;
        margin-bottom: 8px;
    }

    .flow-modal-title {
        font-size: 28px;
        font-weight: 900;
        color: #1a1a1a;
        margin-bottom: 24px;
        letter-spacing: -0.8px;
    }

    .flow-modal-section {
        margin-bottom: 22px;
    }

    .flow-modal-section-title {
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1.2px;
        color: #888;
        margin-bottom: 8px;
    }

    .flow-modal-section-content {
        font-size: 14px;
        line-height: 1.7;
        color: #555;
    }

    .flow-modal-section-content ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    .flow-modal-section-content li {
        margin-bottom: 6px;
    }

    .flow-modal-metrics {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        margin-top: 24px;
        padding-top: 24px;
        border-top: 1px solid #f0f0f0;
    }

    .flow-modal-metric {
        text-align: center;
        padding: 14px 10px;
        background: #fafafa;
        border-radius: 8px;
    }

    .flow-modal-metric-value {
        font-size: 22px;
        font-weight: 900;
        color: #1a1a1a;
        font-family: 'JetBrains Mono', monospace;
        margin-bottom: 4px;
    }

    .flow-modal-metric-label {
        font-size: 10px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: #aaa;
    }

    .flow-path-label {
        font-family: 'JetBrains Mono', monospace;
        font-size: 11px;
        font-weight: 700;
        fill: rgba(0, 0, 0, 0.5);
        pointer-events: none;
    }

    .flow-scroll-hint {
        display: none;
        position: absolute;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        z-index: 100;
        pointer-events: none;
        animation: flowScrollHintFade 3s ease-out forwards;
    }

    @keyframes flowScrollHintFade {
        0%, 70% { opacity: 1; }
        100% { opacity: 0; }
    }

    /* Mobile styles */
    @media (max-width: 768px) {
        .flow-header {
            padding: 16px 20px;
        }

        .flow-header-top {
            flex-wrap: wrap;
            gap: 10px;
        }

        .flow-title {
            font-size: 22px;
            width: 100%;
        }

        .flow-subtitle {
            font-size: 12px;
        }

        .flow-context-note {
            font-size: 11px;
        }

        .flow-stats {
            gap: 20px;
            flex-wrap: wrap;
        }

        .flow-stat::after {
            right: -10px;
            height: 20px;
        }

        .flow-stat-value {
            font-size: 20px;
        }

        .flow-stat-label {
            font-size: 9px;
        }

        .flow-viewport {
            height: calc(100vh - 350px);
            min-height: 450px;
            overflow-x: auto;
            overflow-y: hidden;
            cursor: default;
            -webkit-overflow-scrolling: touch;
        }

        .flow-viewport.grabbing {
            cursor: default;
        }

        .flow-canvas {
            transform: none !important;
            position: relative;
            min-width: 1400px;
            height: 950px;
        }

        .flow-scroll-hint {
            display: block;
        }

        .flow-node {
            padding: 14px 16px;
        }

        .flow-node[data-node="entry"] {
            left: 40px !important;
            top: 300px !important;
            width: 220px !important;
        }

        .flow-node[data-node="standard"] {
            left: 360px !important;
            top: 140px !important;
            width: 240px !important;
        }

        .flow-node[data-node="custom"] {
            left: 360px !important;
            top: 320px !important;
            width: 240px !important;
        }

        .flow-node[data-node="managed"] {
            left: 360px !important;
            top: 500px !important;
            width: 240px !important;
        }

        .flow-node[data-node="stall"] {
            left: 360px !important;
            top: 700px !important;
            width: 200px !important;
        }

        .flow-node[data-node="governed"] {
            left: 720px !important;
            top: 280px !important;
            width: 260px !important;
        }

        .flow-node[data-node="success"] {
            left: 1100px !important;
            top: 280px !important;
            width: 260px !important;
        }

        .flow-node-title {
            font-size: 14px;
        }

        .flow-node-desc {
            font-size: 11px;
            margin-bottom: 8px;
        }

        .flow-node-data {
            gap: 12px;
            padding-top: 8px;
            font-size: 10px;
        }

        .flow-controls {
            bottom: 16px;
            right: 16px;
            display: none;
        }

        .flow-legend {
            position: static;
            margin: 16px;
            border-radius: 8px;
            padding: 12px 16px;
        }

        .flow-legend-title {
            font-size: 8px;
            margin-bottom: 8px;
        }

        .flow-leg-item {
            gap: 8px;
            margin-bottom: 5px;
        }

        .flow-swatch {
            width: 20px;
            height: 12px;
        }

        .flow-leg-name {
            font-size: 11px;
        }

        .flow-leg-val {
            font-size: 10px;
        }

        .flow-modal-content {
            padding: 24px;
            width: 95%;
            max-height: 85vh;
        }

        .flow-modal-title {
            font-size: 22px;
            margin-bottom: 16px;
        }

        .flow-modal-metrics {
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .flow-modal-metric {
            padding: 10px 6px;
        }

        .flow-modal-metric-value {
            font-size: 16px;
        }

        .flow-modal-metric-label {
            font-size: 8px;
        }
    }

    @media (max-width: 480px) {
        .flow-header {
            padding: 12px 16px;
        }

        .flow-title {
            font-size: 18px;
        }

        .flow-stats {
            gap: 16px;
        }

        .flow-stat-value {
            font-size: 18px;
        }

        .flow-viewport {
            min-height: 400px;
        }

        .flow-legend {
            margin: 12px;
            padding: 10px 12px;
        }
    }
</style>

<div class="flow-header">
    <div class="flow-header-top">
        <h1 class="flow-title">How MIND Works</h1>
    </div>
    <div class="flow-subtitle">Enterprise adoption and governance lifecycle</div>
    <div class="flow-context-note">MIND adoption is not linear. Organizations enter with different levels of readiness and converge only after governance is operational.</div>
    <div class="flow-stats">
        <div class="flow-stat">
            <div class="flow-stat-value">30–90d</div>
            <div class="flow-stat-label">Time to Value</div>
        </div>
        <div class="flow-stat">
            <div class="flow-stat-value">90%</div>
            <div class="flow-stat-label">Retention</div>
        </div>
        <div class="flow-stat">
            <div class="flow-stat-value">5</div>
            <div class="flow-stat-label">Core Paths</div>
        </div>
    </div>
</div>

<div class="flow-viewport" id="flow-vp">
    <div class="flow-scroll-hint" id="flow-scroll-hint">← Swipe to explore →</div>
    <div class="flow-canvas" id="flow-canvas">
        <svg id="flow-svg"></svg>
        
        <!-- ENTRY -->
        <div class="flow-node primary" data-node="entry" style="left: 80px; top: 340px; width: 280px;">
            <div class="flow-node-label">Entry</div>
            <div class="flow-node-title">Workspace Activation</div>
            <div class="flow-node-desc">Contract signed • Tenant provisioned • Identity + billing initialized</div>
            <div class="flow-node-data">
                <span>100% Volume</span>
                <span>Day 0–1</span>
            </div>
        </div>

        <!-- PRIMARY PATH -->
        <div class="flow-node primary" data-node="standard" style="left: 520px; top: 180px; width: 300px;">
            <div class="flow-node-label">Primary · ~60%</div>
            <div class="flow-node-title">Standard MIND Deployment</div>
            <div class="flow-node-desc">Default governance stack • Managed providers • Reference policies</div>
            <div class="flow-node-data">
                <span>~60%</span>
                <span>7–14d</span>
            </div>
        </div>

        <!-- ALTERNATIVE PATH -->
        <div class="flow-node alternative" data-node="custom" style="left: 520px; top: 380px; width: 300px;">
            <div class="flow-node-label">Alternative · ~25%</div>
            <div class="flow-node-title">Custom Governance Setup</div>
            <div class="flow-node-desc">Custom policies • External providers • Org-specific controls</div>
            <div class="flow-node-data">
                <span>~25%</span>
                <span>+15–30d</span>
            </div>
        </div>

        <!-- MANAGED PATH -->
        <div class="flow-node enhanced" data-node="managed" style="left: 520px; top: 570px; width: 300px;">
            <div class="flow-node-label">Managed · ~10%</div>
            <div class="flow-node-title">Managed Enterprise Delivery</div>
            <div class="flow-node-desc">White-glove onboarding • Dedicated governance • SLA support</div>
            <div class="flow-node-data">
                <span>~10%</span>
                <span>+30d</span>
            </div>
        </div>

        <!-- EXIT -->
        <div class="flow-node exit" data-node="stall" style="left: 520px; top: 800px; width: 260px;">
            <div class="flow-node-label">Exit · ~5%</div>
            <div class="flow-node-title">Adoption Stall</div>
            <div class="flow-node-desc">No internal owner • Org not AI-ready • Strategic deprioritization</div>
            <div class="flow-node-data">
                <span>~5% Exit</span>
            </div>
        </div>

        <!-- CORE PLATFORM -->
        <div class="flow-node core" data-node="governed" style="left: 1020px; top: 320px; width: 320px;">
            <div class="flow-node-label">Core · ~95%</div>
            <div class="flow-node-title">Governed AI Operations</div>
            <div class="flow-node-desc">Policies enforced • Costs tracked • Providers orchestrated</div>
            <div class="flow-node-data">
                <span>~95%</span>
                <span>Day 30–90</span>
            </div>
        </div>

        <!-- SUCCESS -->
        <div class="flow-node success" data-node="success" style="left: 1540px; top: 320px; width: 340px;">
            <div class="flow-node-label">Success · ~90%</div>
            <div class="flow-node-title">Organization-Wide AI Governance</div>
            <div class="flow-node-desc">AI standardized • Risk reduced • Spend controlled</div>
            <div class="flow-node-data">
                <span>90% Success</span>
                <span>Ongoing</span>
            </div>
        </div>
    </div>
</div>

<div class="flow-controls">
    <button class="flow-btn" id="flow-zoom-in">+</button>
    <div class="flow-zoom-num" id="flow-z">100%</div>
    <button class="flow-btn" id="flow-zoom-out">−</button>
    <button class="flow-btn" id="flow-reset">⟲</button>
</div>

<div class="flow-legend">
    <div class="flow-legend-title">Path Distribution</div>
    <div class="flow-leg-item">
        <div class="flow-swatch" style="background: #059669;"></div>
        <div class="flow-leg-name">Primary Path</div>
        <div class="flow-leg-val">60%</div>
    </div>
    <div class="flow-leg-item">
        <div class="flow-swatch" style="background: #d97706;"></div>
        <div class="flow-leg-name">Custom Setup</div>
        <div class="flow-leg-val">25%</div>
    </div>
    <div class="flow-leg-item">
        <div class="flow-swatch" style="background: #7c3aed;"></div>
        <div class="flow-leg-name">Managed Delivery</div>
        <div class="flow-leg-val">10%</div>
    </div>
    <div class="flow-leg-item">
        <div class="flow-swatch" style="background: #dc2626;"></div>
        <div class="flow-leg-name">Adoption Stall</div>
        <div class="flow-leg-val">5%</div>
    </div>
</div>

<div class="flow-modal" id="flow-modal">
    <div class="flow-modal-content">
        <button class="flow-modal-close" id="flow-modal-close">×</button>
        <div id="flow-modal-body"></div>
    </div>
</div>

<script>
(function() {
    const nodes = {
        entry: {x: 80, y: 340, w: 280, h: 130},
        standard: {x: 520, y: 180, w: 300, h: 130},
        custom: {x: 520, y: 380, w: 300, h: 130},
        managed: {x: 520, y: 570, w: 300, h: 130},
        stall: {x: 520, y: 800, w: 260, h: 110},
        governed: {x: 1020, y: 320, w: 320, h: 130},
        success: {x: 1540, y: 320, w: 340, h: 130}
    };

    function edge(id, side, vOffset = 0) {
        const n = nodes[id];
        return {
            x: side === 'right' ? n.x + n.w : n.x,
            y: n.y + n.h / 2 + vOffset
        };
    }

    function sankeyPath(fromId, toId, value, fromOffset = 0, toOffset = 0) {
        const from = edge(fromId, 'right', fromOffset);
        const to = edge(toId, 'left', toOffset);
        const thickness = Math.max(value * 1.6, 6);
        const cp = (to.x - from.x) * 0.45;
        
        return `
            M ${from.x},${from.y - thickness/2}
            C ${from.x + cp},${from.y - thickness/2}
              ${to.x - cp},${to.y - thickness/2}
              ${to.x},${to.y - thickness/2}
            L ${to.x},${to.y + thickness/2}
            C ${to.x - cp},${to.y + thickness/2}
              ${from.x + cp},${from.y + thickness/2}
              ${from.x},${from.y + thickness/2}
            Z
        `;
    }

    const svg = document.getElementById('flow-svg');
    
    const flows = [
        // Entry to all paths
        {from: 'entry', to: 'standard', val: 60, col: '#059669', fromOff: -30, toOff: 0},
        {from: 'entry', to: 'custom', val: 25, col: '#d97706', fromOff: 5, toOff: 0},
        {from: 'entry', to: 'managed', val: 10, col: '#7c3aed', fromOff: 30, toOff: 0},
        {from: 'entry', to: 'stall', val: 5, col: '#dc2626', fromOff: 50, toOff: 0},
        
        // Paths to Core
        {from: 'standard', to: 'governed', val: 60, col: '#059669', fromOff: 0, toOff: -25},
        {from: 'custom', to: 'governed', val: 25, col: '#d97706', fromOff: 0, toOff: 10},
        {from: 'managed', to: 'governed', val: 10, col: '#7c3aed', fromOff: 0, toOff: 35},
        
        // Core to Success
        {from: 'governed', to: 'success', val: 90, col: '#059669', fromOff: 0, toOff: 0}
    ];

    let svgContent = '';
    
    flows.forEach(f => {
        const pathD = sankeyPath(f.from, f.to, f.val, f.fromOff, f.toOff);
        svgContent += `<path d="${pathD}" fill="${f.col}" class="flow-path" data-from="${f.from}" data-to="${f.to}"/>`;
    });

    // Flow labels
    const labels = [
        {from: 'entry', to: 'standard', val: '60%', yOff: -50},
        {from: 'entry', to: 'custom', val: '25%', yOff: 20},
        {from: 'entry', to: 'managed', val: '10%', yOff: 85},
        {from: 'entry', to: 'stall', val: '5%', yOff: 165},
        {from: 'governed', to: 'success', val: '90%', yOff: 0}
    ];

    labels.forEach(l => {
        const fromPt = edge(l.from, 'right');
        const toPt = edge(l.to, 'left');
        const mx = (fromPt.x + toPt.x) / 2;
        const my = (fromPt.y + toPt.y) / 2 + (l.yOff || 0);
        svgContent += `<text x="${mx}" y="${my}" class="flow-path-label" text-anchor="middle">${l.val}</text>`;
    });

    // Timeline markers
    svgContent += `
        <line x1="80" y1="100" x2="360" y2="100" stroke="#e8e8e8" stroke-dasharray="4,4"/>
        <line x1="520" y1="100" x2="820" y2="100" stroke="#e8e8e8" stroke-dasharray="4,4"/>
        <line x1="1020" y1="100" x2="1340" y2="100" stroke="#e8e8e8" stroke-dasharray="4,4"/>
        <line x1="1540" y1="100" x2="1880" y2="100" stroke="#e8e8e8" stroke-dasharray="4,4"/>
        
        <text x="220" y="80" text-anchor="middle" font-family="JetBrains Mono" font-size="10" font-weight="700" fill="#bbb">DAY 0–1</text>
        <text x="670" y="80" text-anchor="middle" font-family="JetBrains Mono" font-size="10" font-weight="700" fill="#bbb">DAY 7–30</text>
        <text x="1180" y="80" text-anchor="middle" font-family="JetBrains Mono" font-size="10" font-weight="700" fill="#bbb">DAY 30–90</text>
        <text x="1710" y="80" text-anchor="middle" font-family="JetBrains Mono" font-size="10" font-weight="700" fill="#bbb">ONGOING</text>
    `;

    svg.innerHTML = svgContent;

    // Check if mobile
    function isMobile() {
        return window.innerWidth <= 768;
    }

    // Pan/zoom (desktop only)
    let scale = 0.7;
    let tx = 50;
    let ty = 30;
    let dragging = false;
    let startX, startY;

    const vp = document.getElementById('flow-vp');
    const canvas = document.getElementById('flow-canvas');
    const zoomEl = document.getElementById('flow-z');

    function update() {
        if (isMobile()) return;
        canvas.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;
        zoomEl.textContent = `${Math.round(scale * 100)}%`;
    }

    vp.addEventListener('wheel', (e) => {
        if (isMobile()) return;
        e.preventDefault();
        const rect = vp.getBoundingClientRect();
        const mx = e.clientX - rect.left;
        const my = e.clientY - rect.top;
        const cx = (mx - tx) / scale;
        const cy = (my - ty) / scale;
        const delta = -e.deltaY * 0.001;
        const newScale = Math.max(0.3, Math.min(1.5, scale + delta));
        tx = mx - cx * newScale;
        ty = my - cy * newScale;
        scale = newScale;
        update();
    });

    vp.addEventListener('mousedown', (e) => {
        if (isMobile()) return;
        if (e.target.closest('.flow-node')) return;
        dragging = true;
        startX = e.clientX - tx;
        startY = e.clientY - ty;
        vp.classList.add('grabbing');
    });

    document.addEventListener('mousemove', (e) => {
        if (isMobile()) return;
        if (!dragging) return;
        tx = e.clientX - startX;
        ty = e.clientY - startY;
        update();
    });

    document.addEventListener('mouseup', () => {
        dragging = false;
        vp.classList.remove('grabbing');
    });

    function zoom(delta) {
        if (isMobile()) return;
        const cx = vp.clientWidth / 2;
        const cy = vp.clientHeight / 2;
        const px = (cx - tx) / scale;
        const py = (cy - ty) / scale;
        const newScale = Math.max(0.3, Math.min(1.5, scale + delta));
        tx = cx - px * newScale;
        ty = cy - py * newScale;
        scale = newScale;
        update();
    }

    function reset() {
        if (isMobile()) return;
        scale = 0.7;
        tx = 50;
        ty = 30;
        update();
    }

    document.getElementById('flow-zoom-in').addEventListener('click', () => zoom(0.15));
    document.getElementById('flow-zoom-out').addEventListener('click', () => zoom(-0.15));
    document.getElementById('flow-reset').addEventListener('click', reset);

    // Initialize based on screen size
    if (!isMobile()) {
        update();
    }

    // Handle resize
    window.addEventListener('resize', () => {
        if (!isMobile()) {
            update();
        }
    });

    // Modal data
    const modalData = {
        entry: {
            label: "ENTRY",
            title: "Workspace Activation",
            color: "#059669",
            sections: [
                {
                    title: "Purpose",
                    content: "Sales handoff → product ownership transfer. Contract is executed, tenant is provisioned, and administrative access is established. No technical work yet."
                },
                {
                    title: "What Happens",
                    content: `<ul>
                        <li>MSA/SOW executed, billing initialized</li>
                        <li>Tenant provisioned in MIND infrastructure</li>
                        <li>SSO/identity integration configured</li>
                        <li>Admin credentials issued</li>
                        <li>Onboarding kickoff scheduled</li>
                    </ul>`
                },
                {
                    title: "Deliverables",
                    content: "Active workspace URL, admin access, billing confirmation, assigned CSM contact, onboarding timeline."
                }
            ],
            metrics: [
                {value: "100%", label: "Volume"},
                {value: "0–1d", label: "Duration"},
                {value: "Sales", label: "Owner"}
            ]
        },
        standard: {
            label: "PRIMARY PATH",
            title: "Standard MIND Deployment",
            color: "#059669",
            sections: [
                {
                    title: "Overview",
                    content: "The 'happy path' for most teams. Default governance stack with managed providers, reference policies, and standard configurations. Minimal customization required."
                },
                {
                    title: "What Gets Enabled",
                    content: `<ul>
                        <li>Provider registry activated (OpenAI, Anthropic, etc.)</li>
                        <li>Default governance rules enabled</li>
                        <li>Runtime orchestration online</li>
                        <li>UI + API access granted</li>
                        <li>Standard audit logging active</li>
                    </ul>`
                },
                {
                    title: "Ideal For",
                    content: "Teams without complex regulatory requirements, using standard LLM providers, ready to adopt reference governance policies with minimal modification."
                }
            ],
            metrics: [
                {value: "~60%", label: "Of Customers"},
                {value: "7–14d", label: "To Live"},
                {value: "Self-Serve", label: "Motion"}
            ]
        },
        custom: {
            label: "ALTERNATIVE PATH",
            title: "Custom Governance Setup",
            color: "#d97706",
            sections: [
                {
                    title: "Overview",
                    content: "For organizations requiring governance configurations beyond the standard stack. Custom policies, external providers, or organization-specific control requirements."
                },
                {
                    title: "Triggering Conditions",
                    content: `<ul>
                        <li>Regulated environments (healthcare, finance, defense)</li>
                        <li>Custom compute / LLM providers (Azure OpenAI, private endpoints)</li>
                        <li>Internal policy requirements that differ from reference</li>
                        <li>Multi-region or data residency constraints</li>
                    </ul>`
                },
                {
                    title: "Additional Work",
                    content: "Policy design sessions, custom provider integration, compliance mapping, security review alignment, extended testing cycles."
                }
            ],
            metrics: [
                {value: "~25%", label: "Of Customers"},
                {value: "+15–30d", label: "Extra Time"},
                {value: "Guided", label: "Motion"}
            ]
        },
        managed: {
            label: "MANAGED DELIVERY",
            title: "Managed Enterprise Delivery",
            color: "#7c3aed",
            sections: [
                {
                    title: "Overview",
                    content: "White-glove delivery mode for strategic accounts. Dedicated solutions engineering, policy design workshops, and SLA-backed support throughout deployment. This is a delivery mode, not a product tier."
                },
                {
                    title: "Delivery Includes",
                    content: `<ul>
                        <li>Dedicated solutions engineer</li>
                        <li>Policy design workshops with stakeholders</li>
                        <li>Multi-tenant / multi-org setup support</li>
                        <li>Custom integration development</li>
                        <li>Executive business reviews</li>
                    </ul>`
                },
                {
                    title: "Ideal For",
                    content: "Large enterprises, complex multi-product deployments, organizations requiring change management support, executive-visibility implementations."
                }
            ],
            metrics: [
                {value: "~10%", label: "Of Customers"},
                {value: "+30d", label: "Extra Time"},
                {value: "High-Touch", label: "Delivery"}
            ]
        },
        stall: {
            label: "EXIT",
            title: "Adoption Stall",
            color: "#dc2626",
            sections: [
                {
                    title: "Definition",
                    content: "Failure to operationalize MIND within the organization. This is NOT churn—it's failure to move from contracted to deployed. The product was never truly adopted."
                },
                {
                    title: "Common Causes",
                    content: `<ul>
                        <li>No internal owner / champion departure</li>
                        <li>Organization not AI-ready (no active initiatives)</li>
                        <li>Strategic deprioritization / competing projects win</li>
                        <li>Reorg disrupts sponsorship</li>
                        <li>Budget reallocated before deployment</li>
                    </ul>`
                },
                {
                    title: "Prevention",
                    content: "Better pre-sales qualification on AI readiness, executive sponsor identification, implementation resource commitment verification, shorter time-to-value targets."
                }
            ],
            metrics: [
                {value: "~5%", label: "Exit Rate"},
                {value: "30–60d", label: "To Detect"},
                {value: "Low", label: "Recovery"}
            ]
        },
        governed: {
            label: "CORE PLATFORM",
            title: "Governed AI Operations",
            color: "#059669",
            sections: [
                {
                    title: "Definition",
                    content: "This is where MIND becomes mission-critical infrastructure. All deployment paths converge here. Policies are enforced, costs are tracked, providers are orchestrated."
                },
                {
                    title: "Capabilities Live",
                    content: `<ul>
                        <li>Runtime execution active</li>
                        <li>Budget enforcement operational</li>
                        <li>Audit logs collecting</li>
                        <li>Safety constraints enforced</li>
                        <li>Provider orchestration running</li>
                        <li>Team access provisioned</li>
                    </ul>`
                },
                {
                    title: "Value Realization Begins",
                    content: "First production workloads running through MIND. Cost visibility established. Governance posture measurable. Platform is no longer a tool—it's infrastructure."
                }
            ],
            metrics: [
                {value: "~95%", label: "Reach Core"},
                {value: "30–90d", label: "Timeline"},
                {value: "CSM", label: "Owner"}
            ]
        },
        success: {
            label: "SUCCESS",
            title: "Organization-Wide AI Governance",
            color: "#059669",
            sections: [
                {
                    title: "Definition",
                    content: "AI governance standardized across the organization. Risk reduced through consistent policies. Spend controlled and predictable. Not everyone who reaches Core expands org-wide—some remain single-team deployments."
                },
                {
                    title: "Success Indicators",
                    content: `<ul>
                        <li>Multiple teams actively using MIND</li>
                        <li>Predictable, controlled AI costs</li>
                        <li>Compliance-ready AI usage patterns</li>
                        <li>Governance policies adopted org-wide</li>
                        <li>Executive visibility into AI operations</li>
                    </ul>`
                },
                {
                    title: "Expansion Opportunity",
                    content: "New teams onboarding, additional use cases discovered, tier upgrades, geographic expansion, adjacent product adoption. NRR engine begins."
                }
            ],
            metrics: [
                {value: "~90%", label: "Of Core"},
                {value: "Ongoing", label: "Duration"},
                {value: "Account", label: "Owner"}
            ]
        }
    };

    const modal = document.getElementById('flow-modal');
    const modalContent = document.querySelector('.flow-modal-content');
    const modalBody = document.getElementById('flow-modal-body');

    function openModal(nodeType) {
        const data = modalData[nodeType];
        if (!data) return;
        
        modalContent.style.setProperty('--accent-color', data.color);
        
        let html = `
            <div class="flow-modal-label">${data.label}</div>
            <div class="flow-modal-title">${data.title}</div>
        `;
        
        data.sections.forEach(section => {
            html += `
                <div class="flow-modal-section">
                    <div class="flow-modal-section-title">${section.title}</div>
                    <div class="flow-modal-section-content">${section.content}</div>
                </div>
            `;
        });
        
        html += '<div class="flow-modal-metrics">';
        data.metrics.forEach(metric => {
            html += `
                <div class="flow-modal-metric">
                    <div class="flow-modal-metric-value">${metric.value}</div>
                    <div class="flow-modal-metric-label">${metric.label}</div>
                </div>
            `;
        });
        html += '</div>';
        
        modalBody.innerHTML = html;
        modal.classList.add('active');
    }

    function closeModal() {
        modal.classList.remove('active');
    }

    document.getElementById('flow-modal-close').addEventListener('click', closeModal);

    document.querySelectorAll('.flow-node').forEach(node => {
        const nodeType = node.getAttribute('data-node');
        node.addEventListener('click', () => openModal(nodeType));
        
        node.addEventListener('mouseenter', () => {
            document.querySelectorAll('.flow-path').forEach(flow => {
                const from = flow.getAttribute('data-from');
                const to = flow.getAttribute('data-to');
                if (from === nodeType || to === nodeType) {
                    flow.style.opacity = '0.45';
                    flow.style.filter = 'brightness(1.15)';
                }
            });
        });
        
        node.addEventListener('mouseleave', () => {
            document.querySelectorAll('.flow-path').forEach(flow => {
                flow.style.opacity = '';
                flow.style.filter = '';
            });
        });
    });

    modal.addEventListener('click', (e) => {
        if (e.target.id === 'flow-modal') closeModal();
    });

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeModal();
    });
})();
</script>
